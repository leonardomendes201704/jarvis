<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leonardo Jarvis</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
  <div class="app">
    <header class="header">
      <h1 class="title">Leonardo Jarvis</h1>
    </header>

    <main class="main">
      <section class="spectrum-section">
        <div id="spectrum-response" class="spectrum-response" aria-live="polite"></div>
        <canvas id="spectrum-canvas" class="spectrum-canvas" width="800" height="200"></canvas>
      </section>

      <section class="tolerance-section">
        <label for="noise-tolerance" class="tolerance-label">TolerÃ¢ncia ao ruÃ­do: <span id="noise-tolerance-value">28</span></label>
        <input type="range" id="noise-tolerance" class="tolerance-slider" min="0" max="80" value="28" aria-label="TolerÃ¢ncia ao ruÃ­do">
      </section>

      <section class="voice-section">
        <h2 class="panel-title">Voz</h2>
        <div class="voice-control">
          <label for="voice-rate" class="tolerance-label">Velocidade: <span id="voice-rate-value">1.0</span></label>
          <input type="range" id="voice-rate" class="tolerance-slider" min="0.6" max="1.4" step="0.05" value="1.0" aria-label="Velocidade da voz">
        </div>
        <div class="voice-control">
          <label for="voice-pitch" class="tolerance-label">Tom: <span id="voice-pitch-value">1.0</span></label>
          <input type="range" id="voice-pitch" class="tolerance-slider" min="0.6" max="1.6" step="0.05" value="1.0" aria-label="Tom da voz">
        </div>
        <div class="voice-control">
          <label for="voice-volume" class="tolerance-label">Volume: <span id="voice-volume-value">1.0</span></label>
          <input type="range" id="voice-volume" class="tolerance-slider" min="0.2" max="1.0" step="0.05" value="1.0" aria-label="Volume da voz">
        </div>
      </section>

      <section class="mic-section">
        <button type="button" id="mic-btn" class="mic-btn" aria-label="Ativar microfone">
          <span class="mic-icon" aria-hidden="true"></span>
        </button>
        <p class="mic-status" id="mic-status">Clique para iniciar</p>
      </section>

      <section class="conversation-section">
        <div class="conversation-panel">
          <h2 class="panel-title">VocÃª disse</h2>
          <div id="transcription-area" class="panel-content" aria-live="polite">
            <span class="placeholder">A transcriÃ§Ã£o aparecerÃ¡ aqui...</span>
          </div>
        </div>
        <div class="conversation-panel">
          <h2 class="panel-title">Resposta</h2>
          <div id="response-area" class="panel-content" aria-live="polite">
            <span class="placeholder">A resposta do Jarvis aparecerá aqui...</span>
          </div>
          <button type="button" id="recipe-open-btn" class="btn btn-secondary btn-inline" hidden>Abrir receita</button>
        </div>
      </section>

      <section class="player-section">
        <p class="player-hint">Diga: "abrir v?deo [nome do v?deo]"</p>
      </section>

    </main>

    <footer class="footer">
      <button type="button" id="btn-start" class="btn btn-primary">Iniciar</button>
      <button type="button" id="btn-stop" class="btn btn-secondary" disabled>Parar</button>
      <button type="button" id="btn-openai" class="btn btn-secondary">OpenAI: ON</button>
    </footer>
  </div>

  <div class="modal-backdrop" id="player-modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-label="Player de v?deo">
      <button type="button" class="modal-close" id="player-close" aria-label="Fechar player">?</button>
      <button type="button" class="modal-unmute" id="player-unmute">Ativar som</button>
      <div class="player-visualizer">
        <canvas id="modal-spectrum-left" width="120" height="360"></canvas>
      </div>
      <div class="player-frame">
        <iframe
          id="yt-player"
          title="YouTube Player"
          width="100%"
          height="360"
          src=""
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>
      <div class="player-visualizer">
        <canvas id="modal-spectrum-right" width="120" height="360"></canvas>
      </div>
    </div>
  </div>

  <div class="modal-backdrop" id="recipe-modal" aria-hidden="true">
    <div class="modal-content recipe-modal" role="dialog" aria-modal="true" aria-label="Receita">
      <button type="button" class="modal-close" id="recipe-close" aria-label="Fechar receita">?</button>
      <div class="recipe-frame">
        <iframe
          id="recipe-iframe"
          title="Receitas"
          width="100%"
          height="560"
          src=""
          frameborder="0"
        ></iframe>
      </div>
    </div>
  </div>

  <div class="modal-backdrop" id="route-modal" aria-hidden="true">
    <div class="modal-content route-modal" role="dialog" aria-modal="true" aria-label="Rota">
      <button type="button" class="modal-close" id="route-close" aria-label="Fechar rota">?</button>
      <div class="route-info">
        <div class="panel-title">Rota</div>
        <div class="route-status">
          <div id="route-summary" class="route-summary">Aguardando rota...</div>
          <div id="route-spinner" class="route-spinner" aria-hidden="true"></div>
        </div>
      </div>
      <div class="route-meta">
        <div><span>Origem</span><strong id="route-origin">-</strong></div>
        <div><span>Destino</span><strong id="route-destination">-</strong></div>
        <div><span>Tempo</span><strong id="route-time">-</strong></div>
      </div>
      <div class="route-map" id="route-map"></div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <div class="modal-backdrop" id="image-modal" aria-hidden="true">
    <div class="modal-content image-modal" role="dialog" aria-modal="true" aria-label="Imagens">
      <button type="button" class="modal-close" id="image-close" aria-label="Fechar imagens">?</button>
      <div class="route-info">
        <div class="panel-title">Imagens</div>
        <div id="image-query" class="route-summary">Aguardando busca...</div>
      </div>
      <div class="image-carousel">
        <div id="image-spinner" class="route-spinner active"></div>
        <div class="swiper image-swiper">
          <div class="swiper-wrapper" id="image-track"></div>
        </div>
      </div>
      <div class="image-attribution" id="image-attribution"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <div class="modal-backdrop" id="agenda-modal" aria-hidden="true">
    <div class="modal-content agenda-modal" role="dialog" aria-modal="true" aria-label="Agenda">
      <button type="button" class="modal-close" id="agenda-close" aria-label="Fechar agenda">?</button>
      <div class="route-info">
        <div class="panel-title">Agenda</div>
        <div id="agenda-mode" class="route-summary">Dia</div>
      </div>
      <div class="agenda-grid" id="agenda-grid"></div>
    </div>
  </div>

  <script src="js/audio.js"></script>
  <script src="js/spectrum.js"></script>
  <script src="js/speech.js"></script>
  <script src="js/tts.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
